# Environment Template for NODE_OPTIONS Integration
# Copy this file to your project root as .env and customize as needed

# === Core Logging Configuration ===
# HTTP endpoint for log submission
TKR_LOG_ENDPOINT=http://localhost:42003/api/logs

# Minimum log level to capture (DEBUG, INFO, WARN, ERROR, FATAL)
TKR_LOG_LEVEL=INFO

# Master switch for logging
TKR_LOG_ENABLED=true

# Only log in directories with .context-kit
TKR_LOG_PROJECT_ONLY=true

# === Batch Configuration ===
# Number of logs to batch before sending (1-100)
TKR_LOG_BATCH_SIZE=10

# Milliseconds between batch flushes (1000-60000)
TKR_LOG_FLUSH_INTERVAL=5000

# === NODE_OPTIONS Process Filtering ===
# Process names to enable logging for (comma-separated)
# Default: npm,yarn,node,tsx,ts-node
TKR_NODE_PROCESS_FILTER=npm,yarn,node,tsx,ts-node

# Path patterns to skip logging (comma-separated)
# Default: node_modules,.git,dist,build
TKR_NODE_SKIP_PATTERNS=node_modules,.git,dist,build

# Enable logging for child processes
TKR_NODE_ENABLE_CHILD_PROCESSES=true

# === Advanced NODE_OPTIONS Configuration ===
# Silent initialization (reduce startup noise)
TKR_LOG_SILENT_INIT=false

# Verbose initialization for debugging
TKR_LOG_VERBOSE_INIT=false

# Log to console as well as HTTP endpoint
TKR_LOG_TO_CONSOLE=true

# Fail silently if logging service is unavailable
TKR_LOG_FAIL_SILENTLY=true

# === Filter Presets ===
# Filter preset (development, production, test)
TKR_LOG_FILTER_PRESET=development

# Enable node_modules filtering
TKR_LOG_FILTER_NODE_MODULES=true

# Enable build tool noise filtering
TKR_LOG_FILTER_BUILD_TOOLS=true

# Enable development noise filtering
TKR_LOG_FILTER_DEV_NOISE=true

# === Metadata Enrichment ===
# Metadata preset (development, production, minimal)
TKR_LOG_METADATA_PRESET=development

# Include git repository information
TKR_LOG_INCLUDE_GIT=true

# Include package.json information
TKR_LOG_INCLUDE_PACKAGE=true

# Include performance metrics
TKR_LOG_INCLUDE_PERFORMANCE=false

# Include stack trace information
TKR_LOG_INCLUDE_STACK=true

# === Auto-Capture Configuration ===
# Capture unhandled errors and exceptions
TKR_LOG_CAPTURE_ERRORS=true

# Capture Express.js requests (backend only)
TKR_LOG_CAPTURE_EXPRESS=true

# Capture React errors (frontend only)
TKR_LOG_CAPTURE_REACT=true

# === Performance and Debugging ===
# Enable statistics endpoint for debugging
TKR_LOG_STATS_ENDPOINT=false

# Statistics logging interval in milliseconds
TKR_LOG_STATS_INTERVAL=30000

# Enable manual NODE_OPTIONS override (advanced users)
TKR_NODE_MANUAL_OVERRIDE=false

# === Example Usage ===
# To enable NODE_OPTIONS integration in your project:
# 1. Copy this file to your project root as .env
# 2. Customize the variables above
# 3. Run: source .env
# 4. Run: .context-kit/node-options/setup.js
# 5. Start your Node.js application normally
#
# The logging will automatically be enabled for npm, yarn, node, tsx, and ts-node processes
# while filtering out noise from node_modules, .git, dist, and build directories.